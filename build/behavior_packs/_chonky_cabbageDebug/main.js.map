{"version":3,"sources":["main.ts"],"names":[],"mappings":"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","file":"../chonky_cabbage/scripts/main.js","sourcesContent":["import { world, system, BlockPermutation } from \"@minecraft/server\";\nimport RoadMaker from \"./RoadMaker\";\nimport Debug from \"./Debug\";\n\nconst TicksPerSecond: number = 20;\nconst HeadHeightInBlocks:number = 2;\nconst SecondsBeforeInit:number = 20;\nconst SecondsBetweenRoadmakerTicks: number = 0.2;\n\nlet roadmaker:RoadMaker;\nlet initialized:boolean = false;\n\n// road maker initialization\nfunction initialize() {\n  Debug.trace(\"Initializing RoadMaker...\");\n  try{\n    roadmaker = new RoadMaker();\n  }\n  catch(e)\n  {\n    Debug.error(`Failed to start RoadMaker: ${e}`);\n  }\n  Debug.info(\"RoadMaker initialized:\");\n  help();\n  initialized = true;\n}\n\n// main game loop\nfunction mainTick() {\n  if(initialized === false && system.currentTick > (TicksPerSecond * SecondsBeforeInit)){\n    Debug.trace(\"Starting Add-On capabilities...\");\n    initialize();\n  }\n\n  if(initialized === true && system.currentTick % (SecondsBetweenRoadmakerTicks * TicksPerSecond) === 0)\n  {   \n    try {\n      roadmaker.tryTickIteration();\n    }\n    catch(e)\n    {\n      Debug.error(`Failed to complete road: ${e}`);\n      roadmaker.cancelRoad();\n    }\n    \n  }\n\n  system.run(mainTick);\n}\n\nfunction help() {\n  Debug.info(\"Help: /scriptevent chonky:help\")\n  Debug.info(\"Make Road: /scriptevent chonky:makeroad [length]\");\n  Debug.info(\"Cancel Road: /scriptevent chonky:cancel\");\n  Debug.info(\"Style Road: /scriptevent chonky:assign [roadblock_type]=[minecraft_block_id]\");\n  Debug.info(\"Road Block Types:\")\n  Debug.info(\"- Foundation\");\n  Debug.info(\"- Wall\");\n  Debug.info(\"- Path\");\n  Debug.info(\"- Post\");\n  Debug.info(\"- Light\");\n}\n\n\n\n// listen for script events\nsystem.afterEvents.scriptEventReceive.subscribe((event) => {\n  if(event.id === \"chonky:makeroad\") {\n    const length:number = parseInt(event.message);\n\n    // assume player 1 for now\n    let plyr = world.getAllPlayers()[0];\n\n    if(plyr != null && roadmaker.isRoadInProgress() === false)\n    {\n      const coord = plyr.getHeadLocation();\n      const view = plyr.getViewDirection();\n      coord.y -= HeadHeightInBlocks;\n\n      Debug.info(\"Making road: \" + length);\n\n      roadmaker.startNewRoad(coord, view, length);\n    }\n    else {\n      Debug.error(\"Cannot execute command because road was in progress or no player was found.\");\n    }\n  }\n  if(event.id === \"chonky:cancelroad\")\n  {\n    roadmaker.cancelRoad();\n  }\n  if(event.id === \"chonky:assign\")\n  {\n    const arg = event.message;\n    let kvp = arg.split(\"=\");\n    if(kvp.length == 2)\n    {\n      roadmaker.tryAssignBlockType(kvp[0],kvp[1]);\n    }\n  }\n  if(event.id == \"chonky:help\")\n  {\n    help();\n  }\n});\n\n// start application\nDebug.trace(\"Starting main tick listener\");\nsystem.run(mainTick);"],"sourceRoot":"../../../scripts/"}