{"version":3,"sources":["RoadMaker.ts"],"names":[],"mappings":"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","file":"../chonky_cabbage/scripts/RoadMaker.js","sourcesContent":["import {world, BlockPermutation, Vector3, Vector2 } from \"@minecraft/server\";\r\nimport Debug from \"./Debug\";\r\n\r\nexport default class RoadMaker {\r\n\r\n  public Foundation =  BlockPermutation.resolve(\"minecraft:cobblestone\");\r\n  public Wall =        BlockPermutation.resolve(\"minecraft:cobblestone_wall\");\r\n  public Path =        BlockPermutation.resolve(\"minecraft:bamboo_planks\");\r\n  public Post =        BlockPermutation.resolve(\"minecraft:bamboo_fence\");\r\n  public Light =       BlockPermutation.resolve(\"minecraft:lantern\");\r\n\r\n  // gets a cardinally-aligned value expressed as an integer where 0 = East, 1 = North, etc\r\n  static getCardinalInteger(viewDirection:Vector3): number\r\n  {\r\n    // figure out our 2d look angle\r\n    let lookAngle2d = Math.atan2(viewDirection.z, viewDirection.x);\r\n\r\n    // regulate our angle so it's positive\r\n    while(lookAngle2d < 0)\r\n    {\r\n      lookAngle2d += (Math.PI * 2);\r\n    }\r\n\r\n    // clamp our look angle to a cardinal coordinate\r\n    let cardinal = Math.round(lookAngle2d / (Math.PI / 2));\r\n\r\n    // clamp our look angle to 0 - 3\r\n    cardinal = cardinal > 3 ? 0 : cardinal;\r\n\r\n    return cardinal;\r\n  }\r\n\r\n  createRoad(startCoord: Vector3, viewDirection: Vector3, length: number)\r\n  {\r\n    Debug.debug(`Starting ${length} road at ${Debug.printCoordinate3(startCoord)}.`)\r\n\r\n    // round our look angle to a cardinal direction, expressed as an integer where 0 = East\r\n    const cardinalInt = RoadMaker.getCardinalInteger(viewDirection);\r\n\r\n    Debug.debug(`Our cardinal integer is: ${cardinalInt}`);\r\n\r\n    // loop through our length, creating strips of road depending on our cardinal alignment\r\n    for(let i = 0; i < length; i++)\r\n    {\r\n      let drawLights = i % 8 === 0;\r\n      let drawSupports = i % 16 === 0;\r\n\r\n      switch(cardinalInt){\r\n        case 0:\r\n          this.makeXAxisStrip({x:startCoord.x + i, y: startCoord.y, z:startCoord.z}, drawLights, drawSupports);\r\n          break;\r\n        case 1:\r\n          this.makeZAxisStrip({x:startCoord.x, y: startCoord.y, z:startCoord.z + i}, drawLights, drawSupports);\r\n          break;\r\n        case 2:\r\n          this.makeXAxisStrip({x:startCoord.x - i, y: startCoord.y, z:startCoord.z}, drawLights, drawSupports);\r\n          break;\r\n        case 3:\r\n          this.makeZAxisStrip({x:startCoord.x, y: startCoord.y, z:startCoord.z - i}, drawLights, drawSupports);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // creates a strip of road aligned with the X axis\r\n  makeXAxisStrip(center:Vector3, drawLights:boolean = false, drawSupportst:boolean = false)\r\n  {\r\n    // foundation\r\n    this.setBlock(this.Foundation,{x:center.x,y:center.y,z:center.z+2});\r\n    this.setBlock(this.Path,{x:center.x,y:center.y,z:center.z+1});\r\n    this.setBlock(this.Path,{x:center.x,y:center.y,z:center.z});\r\n    this.setBlock(this.Path,{x:center.x,y:center.y,z:center.z-1});\r\n    this.setBlock(this.Foundation,{x:center.x,y:center.y,z:center.z-2});\r\n\r\n    // walls\r\n    this.setBlock(this.Wall,{x:center.x,y:center.y+1,z:center.z+2});\r\n    this.setBlock(this.Wall,{x:center.x,y:center.y+1,z:center.z-2});\r\n\r\n    if(drawLights === true)\r\n    {\r\n      this.makeLamp({x:center.x,y:center.y,z:center.z+2});\r\n      this.makeLamp({x:center.x,y:center.y,z:center.z-2});\r\n    }\r\n  }\r\n\r\n  // creates a strip of road aligned with the Z axis\r\n  makeZAxisStrip(center:Vector3, drawLights:boolean = false, drawSupportst:boolean = false)\r\n  {\r\n    // foundation\r\n    this.setBlock(this.Foundation,{x:center.x-2,y:center.y,z:center.z});\r\n    this.setBlock(this.Path,{x:center.x-1,y:center.y,z:center.z});\r\n    this.setBlock(this.Path,{x:center.x,y:center.y,z:center.z});\r\n    this.setBlock(this.Path,{x:center.x+1,y:center.y,z:center.z});\r\n    this.setBlock(this.Foundation,{x:center.x+2,y:center.y,z:center.z});\r\n\r\n    // walls\r\n    this.setBlock(this.Wall,{x:center.x+2,y:center.y+1,z:center.z});\r\n    this.setBlock(this.Wall,{x:center.x-2,y:center.y+1,z:center.z});\r\n\r\n    if(drawLights === true)\r\n    {\r\n      this.makeLamp({x:center.x+2,y:center.y,z:center.z});\r\n      this.makeLamp({x:center.x-2,y:center.y,z:center.z});\r\n    }\r\n  }\r\n\r\n  makeLamp(center:Vector3)\r\n  {\r\n    this.setBlock(this.Foundation,{x: center.x,y:center.y+1,z:center.z});\r\n    this.setBlock(this.Post,{x: center.x,y:center.y+2,z:center.z});\r\n    this.setBlock(this.Post,{x: center.x,y:center.y+3,z:center.z});\r\n    this.setBlock(this.Light,{x: center.x,y:center.y+4,z:center.z});\r\n  }\r\n\r\n  // sets the block at the provided coordinates to the provided permutation\r\n  setBlock(blockPerm:BlockPermutation, coord:Vector3) {\r\n    Debug.trace(`Setting block at ${Debug.printCoordinate3(coord)}.`);\r\n    const overworld = world.getDimension(\"overworld\");\r\n    overworld.getBlock(coord)?.setPermutation(blockPerm);\r\n  }\r\n}"],"sourceRoot":"../../../scripts/"}